---
layout: default
breadcrumb: '<div id="breadcrumb" class="container-fluid">
        <ol class="breadcrumb">
              <li><a href="/"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>&nbsp主页</a></li>
        </ol>
    </div>'
---
<script type="text/javascript">
  var showList = [];
  function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); 
        var r = decodeURI(window.location.search).substr(1).match(reg); 
        if (r != null) return unescape(r[2]); return null; 
  }
  function filterList(list,cat){
    var showList = [];
    for(i in list){
        if(list[i].category==cat){
          showList.push(list[i]);
        }
    }
    return showList;
  }
  function buildHtml(record) {
    var html = "";
    if(record){
      for(i in record){
        var post = record[i];
        html += '<div class="blog-post">'
         + '<h2 class="blog-post-title"><a href="'+post.url+'">'+post.title+'</a></h2>'
          +'<p class="blog-post-meta">'+post.dateTime+' by <a href="/contact">'+post.author+'</a>&nbsp&nbsp'
            +'<a class="label label-success pull-right category" href="/?cat='+post.category+'" class="label label-success pull-right">'+post.category+'</a>'
          +'</p>'
          +'<p>'+post.excerpt+'</p>'
          +'<hr>'
        +'</div>';
      }
    }
    return html;
  }
  function showPage(pageNo){
    showPage(pageNo);
  }
  function showPage(pageNo){
      var pageSize = 10;
      var total = showList.length;
      var pages = Math.floor(total%pageSize==0?(total/pageSize):(total/pageSize+1));
      pageNo = pageNo<0?0:pageNo;
      pageNo = pageNo>pages?pages:pageNo;
      var start = (pageNo-1)*pageSize;
      start = start<0?0:start;
      var end = pageNo*pageSize;
      end = end>(total)?(total):end;
      var record = showList.slice(start,end);
      var html = buildHtml(record);
      if(showList.length!=0){
        html += '<nav><ul class="pager">';
      
          if(pageNo==1){
            html += '<li class="previous disabled"><a href="#">上一页</a></li>';
          }else{
            html += '<li class="previous"><a href="javascript:showPage('+(pageNo-1)+')">上一页</a></li>';
          }

          if(pageNo==pages){
            html += '<li class="next disabled"><a href="#">下一页</a></li>';
          }else{
            html += '<li class="next"><a href="javascript:showPage('+(pageNo+1)+')">下一页</a></li>';
          }

       html += '</ul> </nav>';
      }
      
      $("#list").html(html);
  }
  
  var list = [];
 
  {% for post in site.posts %}
  list.push({
        "title":"{{post.title}}"
        ,"dateTime":"{{post.dateTime}}"
        ,"author":"{{post.author}}"
        ,"category":"{{post.category}}"
        ,"excerpt":'{{post.excerpt}}'
        ,"url":'{{post.url}}'
  });
  {% endfor %}
  var cat = getQueryString("cat");
  if(null!=cat){
    showList = filterList(list,cat);
  }else{
    showList = list;
  }
  showPage(1);
</script>




            